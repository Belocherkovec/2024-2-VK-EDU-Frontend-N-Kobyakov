(()=>{var t={629:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarGenerator=void 0;var o=r(n(307)),i=function(){function t(){}return t.prototype.generateRandomAvatar=function(t){var e=new Array;e.push("NoHair","Eyepatch","Hat","Hijab","Turban","WinterHat1","WinterHat2","WinterHat3","WinterHat4","LongHairBigHair","LongHairBob","LongHairBun","LongHairCurly","LongHairCurvy","LongHairDreads","LongHairFrida","LongHairFro","LongHairFroBand","LongHairNotTooLong","LongHairShavedSides","LongHairMiaWallace","LongHairStraight","LongHairStraight2","LongHairStraightStrand","ShortHairDreads01","ShortHairDreads02","ShortHairFrizzle","ShortHairShaggyMullet","ShortHairShortCurly","ShortHairShortFlat","ShortHairShortRound","ShortHairShortWaved","ShortHairSides","ShortHairTheCaesar","ShortHairTheCaesarSidePart");var n=new Array;n.push("Blank","Kurt","Prescription01","Prescription02","Round","Sunglasses","Wayfarers");var r=new Array;r.push("Blank","BeardMedium","BeardLight","BeardMagestic","MoustacheFancy","MoustacheMagnum");var i=new Array;i.push("Auburn","Black","Blonde","BlondeGolden","Brown","BrownDark","Platinum","Red");var a=new Array;a.push("BlazerShirt","BlazerSweater","CollarSweater","GraphicShirt","Hoodie","Overall","ShirtCrewNeck","ShirtScoopNeck","ShirtVNeck");var c=new Array;c.push("Close","Cry","Default","Dizzy","EyeRoll","Happy","Hearts","Side","Squint","Surprised","Wink","WinkWacky");var u=new Array;u.push("Angry","AngryNatural","Default","DefaultNatural","FlatNatural","RaisedExcited","RaisedExcitedNatural","SadConcerned","SadConcernedNatural","UnibrowNatural","UpDown","UpDownNatural");var s=new Array;s.push("Concerned","Default","Disbelief","Eating","Grimace","Sad","ScreamOpen","Serious","Smile","Tongue","Twinkle","Vomit");var l=new Array;l.push("Tanned","Yellow","Pale","Light","Brown","DarkBrown","Black");var f=new Array;f.push("Auburn","Black","Blonde","BlondeGolden","Brown","BrownDark","PastelPink","Platinum","Red","SilverGray");var h=new Array;h.push("Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White");var p=new Array;p.push("Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White");var d=t?o.default(t):o.default();return"https://avataaars.io/?accessoriesType="+n[Math.floor(d()*n.length)]+"&avatarStyle=Circle&clotheColor="+p[Math.floor(d()*p.length)]+"&clotheType="+a[Math.floor(d()*a.length)]+"&eyeType="+c[Math.floor(d()*c.length)]+"&eyebrowType="+u[Math.floor(d()*u.length)]+"&facialHairColor="+i[Math.floor(d()*i.length)]+"&facialHairType="+r[Math.floor(d()*r.length)]+"&hairColor="+f[Math.floor(d()*f.length)]+"&hatColor="+h[Math.floor(d()*h.length)]+"&mouthType="+s[Math.floor(d()*s.length)]+"&skinColor="+l[Math.floor(d()*l.length)]+"&topType="+e[Math.floor(d()*e.length)]},t}();e.AvatarGenerator=i},307:(t,e,n)=>{var r=n(160),o=n(169),i=n(723),a=n(383),c=n(237),u=n(65),s=n(77);s.alea=r,s.xor128=o,s.xorwow=i,s.xorshift7=a,s.xor4096=c,s.tychei=u,t.exports=s},160:function(t,e,n){var r;!function(t,o){function i(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function c(t,e){var n=new i(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.alea=c}(0,t=n.nmd(t),n.amdD)},65:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.tychei=c}(0,t=n.nmd(t),n.amdD)},169:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor128=c}(0,t=n.nmd(t),n.amdD)},237:function(t,e,n){var r;!function(t,o){function i(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,c=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=c[127&i]^=r+a)?o+1:0);for(o>=128&&(c[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=c[o+34&127],n=c[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,c[o]=r^n;t.w=a,t.X=c,t.i=o}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function c(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor4096=c}(0,t=n.nmd(t),n.amdD)},383:function(t,e,n){var r;!function(t,o){function i(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function c(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorshift7=c}(0,t=n.nmd(t),n.amdD)},723:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorwow=c}(0,t=n.nmd(t),n.amdD)},77:function(t,e,n){var r;!function(o,i,a){var c,u=256,s=a.pow(u,6),l=a.pow(2,52),f=2*l,h=255;function p(t,e,n){var r=[],h=v(b((e=1==e?{entropy:!0}:e||{}).entropy?[t,m(i)]:null==t?function(){try{var t;return c&&(t=c.randomBytes)?t=t(u):(t=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(t)),m(t)}catch(t){var e=o.navigator,n=e&&e.plugins;return[+new Date,o,n,o.screen,m(i)]}}():t,3),r),p=new d(r),g=function(){for(var t=p.g(6),e=s,n=0;t<l;)t=(t+n)*u,e*=u,n=p.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|p.g(4)},g.quick=function(){return p.g(4)/4294967296},g.double=g,v(m(p.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,p),t.state=function(){return y(p,{})}),n?(a.random=t,e):t})(g,h,"global"in e?e.global:this==a,e.state)}function d(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=h&i+t[o%n]+(e=a[o])],a[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,a=r.S;t--;)e=a[o=h&o+1],n=n*u+a[h&(a[o]=a[i=h&i+e])+(a[i]=e)];return r.i=o,r.j=i,n})(u)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function b(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(b(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function v(t,e){for(var n,r=t+"",o=0;o<r.length;)e[h&o]=h&(n^=19*e[h&o])+r.charCodeAt(o++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(v(a.random(),i),t.exports){t.exports=p;try{c=n(382)}catch(t){}}else void 0===(r=function(){return p}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},382:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";const t=n.p+"img/Nikolai_avatar.jpg";var e="Николай",r=t,o=new Intl.DateTimeFormat("ru",{hour:"numeric",hour12:!1,minute:"numeric"}),i=new Intl.DateTimeFormat("ru",{weekday:"short"}),a=new Intl.DateTimeFormat("ru",{day:"numeric",month:"short"}),c=new Intl.DateTimeFormat("ru",{day:"2-digit",month:"2-digit",year:"2-digit"}),u="MESSAGE_SEND",s="MESSAGE_READ";function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t){var n,r,o=t.pageName,i=t.userId,a=(n=document.querySelector("body").children,r=1,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,r)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],c={"CHAT-DIALOG":document.createElement("chat-dialog"),"CHATS-MENU":document.createElement("chats-menu")};c["CHATS-MENU"].setAttribute("username",e),c["CHAT-DIALOG"].setAttribute("userid",i),a.tagName!==o&&a.replaceWith(c[o])}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function d(t){var e="function"==typeof Map?new Map:void 0;return d=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(y())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&b(o,n.prototype),o}(t,arguments,v(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,t)},d(t)}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}function g(t,e,n){w(t,e),e.set(t,n)}function w(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(t,e,n){return t.set(x(t,e),n),n}function S(t,e){return t.get(x(t,e))}function x(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var _=new WeakMap,O=new WeakMap,j=new WeakMap,E=new WeakSet,P=function(t){function e(){var t,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e,n){return e=v(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,n||[],v(t).constructor):e.apply(t,n))}(this,e),w(n=t,r=E),r.add(n),g(t,_,void 0),g(t,O,void 0),g(t,j,void 0),function(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t,"container",void 0),t.hadnleClick=t.hadnleClick.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["userid"]}}],(r=[{key:"userId",get:function(){return S(_,this)},set:function(t){k(_,this,t)}},{key:"attributeChangedCallback",value:function(t,e,n){"userid"===t&&(this.userId=n)}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){this.container&&this.container.addEventListener("click",this.hadnleClick)}},{key:"removeEventListeners",value:function(){this.container&&this.container.removeEventListener("click",this.hadnleClick)}},{key:"render",value:function(){k(O,this,JSON.parse(localStorage.getItem("chat"))[this.userId]),k(j,this,S(O,this).messages.at(-1)),this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.container=this.shadowRoot.querySelector(".dialog"),this.addEventListeners()}},{key:"hadnleClick",value:function(){f({pageName:"CHAT-DIALOG",userId:this.userId})}},{key:"getHtml",value:function(){var t,e;return'\n      <link\n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0"\n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nimg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  overflow: hidden;\n}\n\n.dialog {\n  height: 80px;\n  padding: 10px 0;\n  margin: 0 16px;\n  color: var(--color-black);\n  display: flex;\n  align-items: center;\n  column-gap: 12px;\n  position: relative;\n  border-bottom: 1px solid var(--color-white-blue);\n  cursor: pointer;\n}\n.dialog__avatar {\n  width: min-content;\n}\n.dialog__user {\n  display: flex;\n  flex-direction: column;\n  align-self: stretch;\n  justify-content: space-evenly;\n  flex: 1;\n}\n.dialog__username {\n  font-size: 1em;\n}\n.dialog__last-message {\n  font-size: 0.9em;\n  color: var(--color-gray-dark);\n}\n.dialog__info {\n  display: flex;\n  flex-direction: column;\n  align-self: stretch;\n  justify-content: space-around;\n  align-items: end;\n}\n.dialog__last-message-time {\n  font-size: 0.9em;\n  color: var(--color-gray-light);\n}\n.dialog__check-mark {\n  color: var(--color-accent);\n}\n.dialog__unread {\n  color: var(--color-white-full);\n  background: var(--color-accent);\n  padding: 1px 6px;\n  border-radius: 4px;\n  font-size: 0.8em;\n}\n",'</style>\n      <div class="dialog">\n        <img src="').concat(S(O,this).avatar,'" class="dialog__avatar" alt="изображение пользователя" />\n        <div class="dialog__user">\n          <h2 class="dialog__username">').concat(S(O,this).userName,'</h2>\n          <p class="dialog__last-message">').concat((null===(t=S(j,this))||void 0===t?void 0:t.text)||"",'</p>\n        </div>\n        <div class="dialog__info">\n          <p class="dialog__last-message-time">').concat(S(j,this)?x(E,this,C).call(this,new Date(null===(e=S(j,this))||void 0===e?void 0:e.sendDate)):"",'</p>\n          <p class="dialog__check-mark">\n            ').concat(S(j,this)?x(E,this,D).call(this):"","\n          </p>\n        </div>\n      </div>\n    ")}}])&&p(n.prototype,r),o&&p(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(d(HTMLElement));function C(t){var e=new Date,n=t.getDate(),r=t.getMonth(),u=t.getFullYear(),s=o.format(t),l=i.format(t),f=a.format(t),h=c.format(t);return n===e.getDate()&&r===e.getMonth()&&u===e.getFullYear()?"".concat(s):r===e.getMonth()&&u===e.getFullYear()?"".concat(s," ").concat(l):u===e.getFullYear()?"".concat(f):"".concat(h)}function D(){var t,n=S(j,this).author,r=S(j,this).status,o=S(O,this).messages.filter((function(t){return t.author!==e&&t.status===u})).length;switch(r){case"MESSAGE_DRAFT":t="";break;case s:t="done_all";break;case u:t="check"}return n===e?'<span class="material-symbols-rounded">'.concat(t,"</span>"):o?'<p class="dialog__unread">'.concat(o,"</p>"):""}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function L(t){var e="function"==typeof Map?new Map:void 0;return L=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(A())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&F(o,n.prototype),o}(t,arguments,B(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},L(t)}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function R(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function H(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function I(t,e,n){return t.set(z(t,e),n),n}function N(t,e){return t.get(z(t,e))}function z(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var W=new WeakMap,q=new WeakMap,G=new WeakMap,J=new WeakMap,U=new WeakMap,Z=function(t){function e(){var t,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H(t=function(t,e,n){return e=B(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(e,n||[],B(t).constructor):e.apply(t,n))}(this,e),W,void 0),H(t,q,void 0),H(t,G,void 0),H(t,J,void 0),H(t,U,!1),n=t,o=void 0,(r=R(r="inputRequestDelay"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.handleChangeIsSearch=t.handleChangeIsSearch.bind(t),t.handleSearch=t.handleSearch.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){N(W,this)&&N(W,this).addEventListener("click",this.handleChangeIsSearch),N(q,this)&&N(q,this).addEventListener("click",this.handleChangeIsSearch),N(G,this)&&(N(G,this).addEventListener("keyup",this.handleSearch),N(G,this).addEventListener("enter",this.preventDefault))}},{key:"removeEventListeners",value:function(){N(W,this)&&N(W,this).removeEventListener("click",this.handleChangeIsSearch),N(q,this)&&N(q,this).removeEventListener("click",this.handleChangeIsSearch),N(G,this)&&(N(G,this).removeEventListener("keyup",this.handleSearch),N(G,this).removeEventListener("enter",this.preventDefault))}},{key:"handleChangeIsSearch",value:function(){I(U,this,!N(U,this)),sessionStorage.removeItem("chat"),this.render(),N(J,this)&&N(J,this).partialRerender()}},{key:"handleSearch",value:function(){var t=this;this.inputRequestDelay&&clearTimeout(this.inputRequestDelay),this.inputRequestDelay=setTimeout((function(){var e=JSON.parse(localStorage.getItem("chat")),n={};for(var r in e)e[r].userName.trim().toLowerCase().includes(N(G,t).value.trim().toLowerCase())&&(n[r]=e[r]);sessionStorage.setItem("chat",JSON.stringify(n)),N(J,t)&&N(J,t).partialRerender()}),500)}},{key:"preventDefault",value:function(t){t.preventDefault()}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),I(W,this,this.shadowRoot.querySelector("#button-search")),I(q,this,this.shadowRoot.querySelector("#button-back")),I(G,this,this.shadowRoot.querySelector("#input-search")),I(J,this,document.querySelector("chats-menu")),this.addEventListeners()}},{key:"getHeaderContent",value:function(){return N(U,this)?'\n      <button class="header__button button-menu" id="button-back">\n        <span class="material-symbols-rounded">arrow_back_ios_new</span>\n      </button>\n      <input placeholder="Поиск..." class="header__search-input" id="input-search" />\n      ':'\n        <button class="header__button button-menu">\n          <span class="material-symbols-rounded">menu</span>\n        </button>\n        <h1 class="header__username"><slot></slot></h1>\n        <button class="header__button button-search" id="button-search">\n          <span class="material-symbols-rounded">search</span>\n        </button>\n        '}},{key:"getHtml",value:function(){return'\n      <link \n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" \n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\ninput[type=submit] {\n  visibility: collapse;\n}\n\ninput {\n  border: 0;\n  outline: none;\n  width: 100%;\n  font-size: inherit;\n}\n\ninput:-webkit-autofill {\n  -webkit-background-clip: text;\n}\n\nbutton {\n  cursor: pointer;\n  color: inherit;\n  background: none;\n  border: none;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  column-gap: 12px;\n  padding: 14px 16px;\n  background: var(--color-accent);\n  color: var(--color-white-full);\n}\n\n.header__username {\n  flex: 1;\n  line-height: 1;\n  font-size: 1.4em;\n}\n\n.header__search-input {\n  background: transparent;\n  color: var(--color-white-full);\n}\n\n.header__search-input::placeholder {\n  color: var(--color-white-full);\n  opacity: 0.5;\n}\n",'</style>\n      <div class="header">\n        ').concat(this.getHeaderContent(),"\n      </div>\n    ")}}])&&T(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(L(HTMLElement)),X=new(n(629).AvatarGenerator);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function $(t){var e="function"==typeof Map?new Map:void 0;return $=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(V())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Q(o,n.prototype),o}(t,arguments,tt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Q(n,t)},$(t)}function V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V=function(){return!!t})()}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}function et(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}var nt=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=function(t,e,n){return e=tt(e),function(t,e){if(e&&("object"==Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V()?Reflect.construct(e,n||[],tt(t).constructor):e.apply(t,n))}(this,e,[].concat(a)),n=t,o=void 0,(r=et(r="button"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.button=this.shadowRoot.querySelector("#button-create-chat"),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.button&&this.button.addEventListener("click",this.handleClickNewChatButton)}},{key:"removeEventListeners",value:function(){this.button&&this.button.removeEventListener("click",this.handleClickNewChatButton)}},{key:"handleClickNewChatButton",value:function(){var t=prompt("Введите имя пользователя для нового диалога"),e=JSON.parse(localStorage.getItem("chat")),n=Object.keys(e).length,r=document.querySelector("chats-menu");t.trim()&&(e[n+1]={avatar:X.generateRandomAvatar(),messages:[],userName:t.trim()},localStorage.setItem("chat",JSON.stringify(e)),r&&r.render())}},{key:"getHtml",value:function(){return'\n      <link \n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" \n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nbutton {\n  cursor: pointer;\n  color: inherit;\n  border: none;\n}\n\n.new-chat-button {\n  background: var(--color-accent);\n  color: var(--color-white-full);\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  position: fixed;\n  bottom: 16px;\n  right: 16px;\n}\n.new-chat-button span {\n  font-size: 2em;\n}\n\n",'</style>\n      <button class="new-chat-button" id="button-create-chat">\n        <span class="material-symbols-rounded">add</span>\n      </button>\n    ')}}])&&K(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}($(HTMLElement));function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function it(t){var e="function"==typeof Map?new Map:void 0;return it=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(at())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&ct(o,n.prototype),o}(t,arguments,ut(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ct(n,t)},it(t)}function at(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(at=function(){return!!t})()}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}function st(t){var e=function(t){if("object"!=rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rt(e)?e:e+""}function lt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ft=new WeakMap,ht=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(t=function(t,e,n){return e=ut(e),function(t,e){if(e&&("object"==rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,at()?Reflect.construct(e,n||[],ut(t).constructor):e.apply(t,n))}(this,e,[].concat(a)),ft,void 0),n=t,o=void 0,(r=st(r="chatData"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["username"]}}],(r=[{key:"name",get:function(){return(t=ft).get(lt(t,this));var t},set:function(t){var e,n;n=t,(e=ft).set(lt(e,this),n)}},{key:"connectedCallback",value:function(){customElements.get("chatmenu-header")||customElements.define("chatmenu-header",Z),customElements.get("create-chat-button")||customElements.define("create-chat-button",nt),customElements.get("chatmenu-dialog")||customElements.define("chatmenu-dialog",P),this.render()}},{key:"attributeChangedCallback",value:function(t,e,n){"username"===t&&(this.userName=n)}},{key:"render",value:function(){this.chatData=JSON.parse(sessionStorage.getItem("chat"))||JSON.parse(localStorage.getItem("chat"))||[],this.innerHTML=this.getHtml()}},{key:"partialRerender",value:function(){this.chatData=JSON.parse(sessionStorage.getItem("chat"))||JSON.parse(localStorage.getItem("chat"))||[],document.querySelector(".chats").innerHTML=Object.keys(this.chatData).map((function(t){return'<chatmenu-dialog userid="'.concat(t,'"></chatmenu-dialog>')})).join("")}},{key:"getHtml",value:function(){return"\n      <chatmenu-header>".concat(this.userName,'</chatmenu-header>\n      <div class="chats">\n        ').concat(Object.keys(this.chatData).map((function(t){return'<chatmenu-dialog userid="'.concat(t,'"></chatmenu-dialog>')})).join(""),"\n      </div>\n      <create-chat-button></create-chat-button>\n    ")}}])&&ot(n.prototype,r),o&&ot(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(it(HTMLElement)),pt={1:{avatar:X.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:s,text:"Привет, Эшли!"},{author:"Дженнифер Эшли",sendDate:"2024-10-01T23:40:00.622Z",status:s,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:s,text:"Как дела?"},{author:"Дженнифер Эшли",sendDate:"2024-10-06T08:40:00.622Z",status:u,text:"Хорошо!"}],userName:"Дженнифер Эшли"},2:{avatar:X.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:s,text:"Привет, Тоха!"},{author:"Антон Иванов",sendDate:"2024-10-01T23:40:00.622Z",status:s,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-10-05T12:12:00.622Z",status:s,text:"Тоха, ты где?"}],userName:"Антон Иванов"},3:{avatar:X.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:s,text:"Привет, Серега!"},{author:"Серёга (Должен 2000 ₽)",sendDate:"2024-10-01T23:40:00.622Z",status:s,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-09-31T15:00:00.622Z",status:u,text:"Серег, где бабло моё?!"}],userName:"Серёга (Должен 2000 ₽)"},4:{avatar:X.generateRandomAvatar(),messages:[{author:e,sendDate:"2023-12-31T23:39:00.622Z",status:u,text:"Привет, Сэм!"}],userName:"Сэм с Нижнего"}};function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function mt(t){var e="function"==typeof Map?new Map:void 0;return mt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(gt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&wt(o,n.prototype),o}(t,arguments,kt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wt(n,t)},mt(t)}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gt=function(){return!!t})()}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function St(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function xt(t,e,n){return(e=_t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _t(t){var e=function(t){if("object"!=dt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dt(e)?e:e+""}function Ot(t,e){return t.get(Et(t,e))}function jt(t,e,n){return t.set(Et(t,e),n),n}function Et(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Pt=new WeakMap,Ct=new WeakMap,Dt=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,At=function(t){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),xt(t=function(t,e,n){return e=kt(e),function(t,e){if(e&&("object"==dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,n||[],kt(t).constructor):e.apply(t,n))}(this,n),"form",void 0),xt(t,"input",void 0),xt(t,"formSendButton",void 0),St(t,Pt,void 0),St(t,Ct,void 0),St(t,Dt,!1),St(t,Mt,void 0),St(t,Tt,"Введите сообщение"),St(t,Lt,"Сначала вы должны ввести имя"),t.handleSubmit=t.handleSubmit.bind(t),t.handleKeyPress=t.handleKeyPress.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(n,t),r=n,i=[{key:"observedAttributes",get:function(){return["userid"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){var r=JSON.parse(localStorage.getItem("chat"));"userid"===t&&(jt(Pt,this,n),jt(Mt,this,r[Ot(Pt,this)].messages),jt(Ct,this,r[Ot(Pt,this)].userName))}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.form=this.shadowRoot.querySelector(".form"),this.input=this.shadowRoot.querySelector(".form__input"),this.formSendButton=this.shadowRoot.querySelector(".form__send-button"),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.form.addEventListener("submit",this.handleSubmit),this.form.addEventListener("keypress",this.handleKeyPress),this.input.addEventListener("input",this.handleInputChange)}},{key:"removeEventListeners",value:function(){this.form&&this.input&&(this.form.removeEventListener("submit",this.handleSubmit),this.form.removeEventListener("keypress",this.handleKeyPress),this.input.removeEventListener("input",this.handleInputChange))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=document.querySelector("messages-list"),n=JSON.parse(localStorage.getItem("chat"));this.input.value.trim()&&(Ot(Mt,this).push({author:this.getAuthor(),sendDate:new Date,status:u,text:this.input.value.trim()}),this.input.value="",this.formSendButton.classList.remove("form__send-button_active"),localStorage.setItem("chat",JSON.stringify(bt(bt({},n),{},xt({},Ot(Pt,this),bt(bt({},n[Ot(Pt,this)]),{},{messages:Ot(Mt,this)})))))),e&&e.render()}},{key:"handleKeyPress",value:function(t){t.shiftKey||13!==t.keyCode||(t.preventDefault(),this.form.dispatchEvent(new Event("submit")))}},{key:"handleInputChange",value:function(){this.input.value?this.formSendButton.classList.add("form__send-button_active"):this.formSendButton.classList.remove("form__send-button_active")}},{key:"lockInput",value:function(){this.input.disabled=!0,this.input.placeholder=Ot(Lt,this),this.formSendButton.classList.remove("form__send-button_active")}},{key:"unLockInput",value:function(){this.input.disabled=!1,this.input.placeholder=Ot(Tt,this),this.handleInputChange()}},{key:"getAuthor",value:function(){return[e,Ot(Ct,this)][+Ot(Dt,this)]}},{key:"invertAuthor",value:function(){jt(Dt,this,!Ot(Dt,this))}},{key:"getHtml",value:function(){return'\n      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nbody {\n  font-size: 16px;\n}\n\n.form {\n  width: 100%;\n  display: flex;\n  padding: 10px 12px;\n  background: var(--color-white-blue);\n  align-items: center;\n  column-gap: 12px;\n}\n\n.form__input {\n  resize: none;\n  padding: 12px 16px;\n  border: 0;\n  outline: none;\n  flex: 1;\n  font-size: inherit;\n  background: var(--color-white-full);\n  border-radius: 20px;\n}\n\n.form__send-button {\n  cursor: pointer;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  background: var(--color-accent);\n  border: none;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  place-items: center;\n}\n.form__send-button_active {\n  display: grid;\n}\n\n.form__send-icon {\n  color: var(--color-white-full);\n  padding-left: 3px;\n}\n",'</style>\n      <form class="form" action="/" autocomplete="off">\n        <textarea \n          class="form__input" \n          name="message-text" \n          placeholder="').concat(Ot(Tt,this),'" \n          rows="1" \n        ></textarea>\n        <button class="form__send-button">\n          <span class="material-symbols-rounded form__send-icon">\n            send\n          </span>\n        </button>\n      </form>')}}])&&vt(r.prototype,o),i&&vt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(mt(HTMLElement));function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Bt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){Jt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ut(r.key),r)}}function zt(t){var e="function"==typeof Map?new Map:void 0;return zt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Wt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&qt(o,n.prototype),o}(t,arguments,Gt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),qt(n,t)},zt(t)}function Wt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wt=function(){return!!t})()}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}function Jt(t,e,n){return(e=Ut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ut(t){var e=function(t){if("object"!=Ft(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ft(e)?e:e+""}function Zt(t,e,n){Xt(t,e),e.set(t,n)}function Xt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yt(t,e){return t.get($t(t,e))}function Kt(t,e,n){return t.set($t(t,e),n),n}function $t(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Vt=new WeakMap,Qt=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakSet,re=function(t){function n(){var t,e,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=function(t,e,n){return e=Gt(e),function(t,e){if(e&&("object"==Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wt()?Reflect.construct(e,n||[],Gt(t).constructor):e.apply(t,n))}(this,n),Xt(e=t,r=ne),r.add(e),Zt(t,Vt,void 0),Zt(t,Qt,void 0),Zt(t,te,void 0),Zt(t,ee,!1),Jt(t,"container",void 0),Jt(t,"actions",void 0),Jt(t,"messageContextIndex",void 0),t.handleMessageMouseDown=t.handleMessageMouseDown.bind(t),t.hadnleContextClick=t.hadnleContextClick.bind(t),t.updateMessageStatus=t.updateMessageStatus.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(n,t),r=n,i=[{key:"observedAttributes",get:function(){return["userid"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){"userid"===t&&Kt(Vt,this,n)}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){Kt(te,this,JSON.parse(localStorage.getItem("chat")));var t=Yt(te,this)[Yt(Vt,this)];Kt(Qt,this,t.messages),this.updateMessageStatus(t),this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.container=this.shadowRoot.querySelector(".messages-container"),this.actions=this.shadowRoot.querySelector(".actions"),this.addEventListeners()}},{key:"updateMessageStatus",value:function(t){var n=this,r=Yt(Qt,this).map((function(r){return Yt(ee,n)||r.author!==t.userName?Yt(ee,n)&&r.author===e?It(It({},r),{},{status:s}):r:It(It({},r),{},{status:s})}));localStorage.setItem("chat",JSON.stringify(It(It({},Yt(te,this)),{},Jt({},Yt(Vt,this),It(It({},t),{},{messages:r})))))}},{key:"addEventListeners",value:function(){this.container&&(this.container.addEventListener("contextmenu",this.hadnleContextClick),this.container.addEventListener("mousedown",this.handleMessageMouseDown))}},{key:"removeEventListeners",value:function(){this.container&&(this.container.removeEventListener("contextmenu",this.hadnleContextClick),this.container.removeEventListener("mousedown",this.handleMessageMouseDown))}},{key:"handleMessageMouseDown",value:function(t){2!==t.button&&this.actions.classList.contains("actions_active")&&(this.actions.classList.remove("actions_active"),this.messageContextIndex=null)}},{key:"hadnleContextClick",value:function(t){t.preventDefault();var e=t.target.closest(".messages-container__message"),n=this.actions.classList.contains("actions_active");e&&!n?(this.messageContextIndex=+e.getAttribute("data-index"),this.renderActionsMenu(t)):(this.messageContextIndex=null,this.actions.classList.remove("actions_active"))}},{key:"renderActionsMenu",value:function(t){var e=window.innerWidth;t.pageX<e/2?this.actions.style.left="".concat(t.pageX,"px"):this.actions.style.left="".concat(t.pageX-142,"px"),this.actions.style.top="".concat(t.pageY,"px"),this.actions.classList.add("actions_active")}},{key:"removeMessage",value:function(){var t=JSON.parse(localStorage.getItem("chat"));Kt(Qt,this,[].concat(Bt(Yt(Qt,this).slice(0,this.messageContextIndex)),Bt(Yt(Qt,this).slice(this.messageContextIndex+1)))),localStorage.setItem("chat",JSON.stringify(It(It({},t),{},Jt({},Yt(Vt,this),It(It({},t[Yt(Vt,this)]),{},{messages:Yt(Qt,this)}))))),this.render()}},{key:"invertUsers",value:function(){Kt(ee,this,!Yt(ee,this)),this.render()}},{key:"getHtml",value:function(){var t=this;return"\n      <style>".concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\n.messages-container {\n  display: flex;\n  flex-direction: column;\n  align-items: end;\n  padding: 8px;\n}\n.messages-container__author {\n  opacity: 0.7;\n}\n.messages-container__message {\n  list-style-type: none;\n  max-width: 90%;\n  margin: 4px 0;\n  padding: 4px 12px;\n  border-radius: 8px 8px 0 8px;\n  background: var(--color-accent);\n  color: var(--color-white-full);\n}\n.messages-container__message_user {\n  background: var(--color-white-full);\n  color: var(--color-black);\n  align-self: flex-start;\n  border-radius: 8px 8px 8px 0;\n}\n.messages-container__timestamp {\n  font-size: 0.7em;\n  color: var(--color-white-blue);\n  opacity: 0.5;\n  display: block;\n  text-align: right;\n}\n.messages-container__message_user .messages-container__timestamp {\n  color: var(--color-gray-dark);\n}\n\n.actions {\n  position: absolute;\n  display: none;\n  border: 1px solid var(--color-gray-light);\n  padding: 4px 8px;\n  background: var(--color-white-full);\n  border-radius: 8px;\n  top: 90px;\n}\n.actions_active {\n  display: block;\n}\n.actions__elem {\n  cursor: pointer;\n  border: none;\n  background: none;\n}\n",'</style>\n      <ul class="messages-container">\n        ').concat(Yt(Qt,this).map((function(e,n){return $t(ne,t,ie).call(t,e,n)})).join(""),'\n      </ul>\n      <div class="actions">\n        <button class="actions__elem" data-action="delete" onclick="this.getRootNode().host.removeMessage()">Удалить сообщение</button>\n      </div>\n    ')}}])&&Nt(r.prototype,o),i&&Nt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(zt(HTMLElement));function oe(t){var e=o.format(t);return"".concat(e)}function ie(t,n){var r,o=t.author.trim()===e;return r=!Yt(ee,this)&&o||Yt(ee,this)&&!o?"messages-container__message messages-container__message":"messages-container__message messages-container__message_user",'\n      <li data-index="'.concat(n,'" class="').concat(r,'">\n        <p class="messages-container__text">').concat(t.text.replace(/\n/g,"<br>"),'</p>\n        <span class="messages-container__timestamp">').concat($t(ne,this,oe).call(this,new Date(t.sendDate)),"</span>\n      </li>\n      ")}function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pe(r.key),r)}}function ue(t){var e="function"==typeof Map?new Map:void 0;return ue=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(se())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&le(o,n.prototype),o}(t,arguments,fe(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),le(n,t)},ue(t)}function se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(se=function(){return!!t})()}function le(t,e){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},le(t,e)}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function he(t,e,n){return(e=pe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pe(t){var e=function(t){if("object"!=ae(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:e+""}function de(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function ye(t,e){return t.get(ve(t,e))}function be(t,e,n){return t.set(ve(t,e),n),n}function ve(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var me=new WeakMap,ge=new WeakMap,we=new WeakMap,ke=new WeakMap,Se=function(t){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),de(t=function(t,e,n){return e=fe(e),function(t,e){if(e&&("object"==ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,se()?Reflect.construct(e,n||[],fe(t).constructor):e.apply(t,n))}(this,n),me,void 0),de(t,ge,void 0),de(t,we,void 0),de(t,ke,!1),he(t,"backButton",void 0),he(t,"swapButton",void 0),t.handleBackClick=t.handleBackClick.bind(t),t.handleSwapClick=t.handleSwapClick.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&le(t,e)}(n,t),o=n,a=[{key:"observedAttributes",get:function(){return["userid"]}}],(i=[{key:"attributeChangedCallback",value:function(t,e,n){if("userid"===t){var r=JSON.parse(localStorage.getItem("chat"));be(me,this,n),be(ge,this,r[ye(me,this)].userName),be(we,this,r[ye(me,this)].avatar)}}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){this.backButton&&(this.backButton.addEventListener("click",this.handleBackClick),this.swapButton.addEventListener("click",this.handleSwapClick))}},{key:"removeEventListeners",value:function(){this.backButton&&(this.backButton.removeEventListener("click",this.handleBackClick),this.swapButton.removeEventListener("click",this.handleSwapClick))}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.backButton=this.shadowRoot.querySelector("#button-back"),this.swapButton=this.shadowRoot.querySelector("#button-swap"),ye(ke,this)&&this.swapButton.classList.add("button__swap_active"),this.addEventListeners()}},{key:"handleBackClick",value:function(){f({pageName:"CHATS-MENU"})}},{key:"handleSwapClick",value:function(){var t=document.querySelector("messages-list"),e=document.querySelector("message-input");t&&t.invertUsers(),e&&e.invertAuthor(),be(ke,this,!ye(ke,this)),this.render()}},{key:"getAvatar",value:function(){return[ye(we,this),r][+ye(ke,this)]}},{key:"getUserName",value:function(){return[ye(ge,this),e][+ye(ke,this)]}},{key:"getHtml",value:function(){return'\n      <link rel="stylesheet"\n            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nimg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  overflow: hidden;\n}\n\nbutton {\n  cursor: pointer;\n}\n\n.button {\n  color: inherit;\n  background: none;\n  border: none;\n}\n\n.header {\n  background: var(--color-white-full);\n  height: 60px;\n  width: 100%;\n  padding: 8px 16px;\n  column-gap: 16px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  color: var(--color-black);\n  z-index: 1;\n}\n\n.user {\n  height: 100%;\n  margin-right: auto;\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n}\n\n.user__avatar {\n  width: unset;\n  border-radius: 50%;\n}\n\n.user__name {\n  color: inherit;\n  font-weight: bold;\n  font-size: 1.2em;\n}\n\n.user__last-online {\n  color: var(--color-gray-light);\n  font-size: 0.8em;\n}\n\n.button__swap_active {\n  color: var(--color-accent);\n}\n",'</style>\n      <header class="header">\n        <button class="button" id="button-back">\n          <span class="material-symbols-rounded">\n            arrow_back_ios_new\n          </span>\n        </button>\n        <div class="user">\n          <img src="').concat(this.getAvatar(),'" alt="Аватар пользователя" class="user__avatar">\n          <div class="user__name-container">\n            <p class="user__name">').concat(this.getUserName(),'</p>\n            <p class="user__last-online">был недавно</p>\n          </div>\n        </div>\n        <button class="button" id="button-swap"><span class="material-symbols-rounded">swap_horiz</span></button>\n      </header>\n    ')}}])&&ce(o.prototype,i),a&&ce(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}(ue(HTMLElement));function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oe(r.key),r)}}function Oe(t){var e=function(t){if("object"!=xe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xe(e)?e:e+""}function je(t){var e="function"==typeof Map?new Map:void 0;return je=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Ee())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Pe(o,n.prototype),o}(t,arguments,Ce(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pe(n,t)},je(t)}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ee=function(){return!!t})()}function Pe(t,e){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pe(t,e)}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ce(t)}function De(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Me(t,e){return t.get(Le(t,e))}function Te(t,e,n){return t.set(Le(t,e),n),n}function Le(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ae=new WeakMap,Fe=new WeakMap,Be=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return De(t=function(t,e,n){return e=Ce(e),function(t,e){if(e&&("object"==xe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,n||[],Ce(t).constructor):e.apply(t,n))}(this,e,[].concat(r)),Ae,void 0),De(t,Fe,void 0),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pe(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["userid"]}}],(r=[{key:"connectedCallback",value:function(){customElements.get("messages-list")||customElements.define("messages-list",re),customElements.get("message-input")||customElements.define("message-input",At),customElements.get("chat-header")||customElements.define("chat-header",Se),this.render()}},{key:"attributeChangedCallback",value:function(t,e,n){"userid"===t&&(Te(Ae,this,n),Te(Fe,this,JSON.parse(localStorage.getItem("chat"))[Me(Ae,this)]))}},{key:"render",value:function(){this.innerHTML=this.getHtml()}},{key:"getHtml",value:function(){return"\n      <style>".concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nchat-dialog {\n  display: flex;\n  flex-direction: column;\n  height: 100dvh;\n  min-height: 100dvh;\n}\n\nmessages-list {\n  background: var(--color-white-blue);\n  flex: 1;\n}\n","</style>\n      <chat-header userid=").concat(Me(Ae,this),"></chat-header>\n      <messages-list userid=").concat(Me(Ae,this),"></messages-list>\n      <message-input userid=").concat(Me(Ae,this),"></message-input>\n    ")}}])&&_e(n.prototype,r),o&&_e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(je(HTMLElement));n.p,customElements.get("chat-dialog")||customElements.define("chat-dialog",Be),customElements.get("chats-menu")||customElements.define("chats-menu",ht);var Re=document.querySelector("#root"),He=document.createElement("chats-menu");He.setAttribute("username",e),Re.replaceWith(He),localStorage.getItem("chat")||(localStorage.setItem("chat",JSON.stringify(pt)),He.render())})()})();