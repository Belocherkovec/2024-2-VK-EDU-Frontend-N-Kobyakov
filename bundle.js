(()=>{var t={629:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarGenerator=void 0;var o=r(n(307)),i=function(){function t(){}return t.prototype.generateRandomAvatar=function(t){var e=new Array;e.push("NoHair","Eyepatch","Hat","Hijab","Turban","WinterHat1","WinterHat2","WinterHat3","WinterHat4","LongHairBigHair","LongHairBob","LongHairBun","LongHairCurly","LongHairCurvy","LongHairDreads","LongHairFrida","LongHairFro","LongHairFroBand","LongHairNotTooLong","LongHairShavedSides","LongHairMiaWallace","LongHairStraight","LongHairStraight2","LongHairStraightStrand","ShortHairDreads01","ShortHairDreads02","ShortHairFrizzle","ShortHairShaggyMullet","ShortHairShortCurly","ShortHairShortFlat","ShortHairShortRound","ShortHairShortWaved","ShortHairSides","ShortHairTheCaesar","ShortHairTheCaesarSidePart");var n=new Array;n.push("Blank","Kurt","Prescription01","Prescription02","Round","Sunglasses","Wayfarers");var r=new Array;r.push("Blank","BeardMedium","BeardLight","BeardMagestic","MoustacheFancy","MoustacheMagnum");var i=new Array;i.push("Auburn","Black","Blonde","BlondeGolden","Brown","BrownDark","Platinum","Red");var a=new Array;a.push("BlazerShirt","BlazerSweater","CollarSweater","GraphicShirt","Hoodie","Overall","ShirtCrewNeck","ShirtScoopNeck","ShirtVNeck");var c=new Array;c.push("Close","Cry","Default","Dizzy","EyeRoll","Happy","Hearts","Side","Squint","Surprised","Wink","WinkWacky");var s=new Array;s.push("Angry","AngryNatural","Default","DefaultNatural","FlatNatural","RaisedExcited","RaisedExcitedNatural","SadConcerned","SadConcernedNatural","UnibrowNatural","UpDown","UpDownNatural");var u=new Array;u.push("Concerned","Default","Disbelief","Eating","Grimace","Sad","ScreamOpen","Serious","Smile","Tongue","Twinkle","Vomit");var l=new Array;l.push("Tanned","Yellow","Pale","Light","Brown","DarkBrown","Black");var f=new Array;f.push("Auburn","Black","Blonde","BlondeGolden","Brown","BrownDark","PastelPink","Platinum","Red","SilverGray");var h=new Array;h.push("Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White");var p=new Array;p.push("Black","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","Red","White");var d=t?o.default(t):o.default();return"https://avataaars.io/?accessoriesType="+n[Math.floor(d()*n.length)]+"&avatarStyle=Circle&clotheColor="+p[Math.floor(d()*p.length)]+"&clotheType="+a[Math.floor(d()*a.length)]+"&eyeType="+c[Math.floor(d()*c.length)]+"&eyebrowType="+s[Math.floor(d()*s.length)]+"&facialHairColor="+i[Math.floor(d()*i.length)]+"&facialHairType="+r[Math.floor(d()*r.length)]+"&hairColor="+f[Math.floor(d()*f.length)]+"&hatColor="+h[Math.floor(d()*h.length)]+"&mouthType="+u[Math.floor(d()*u.length)]+"&skinColor="+l[Math.floor(d()*l.length)]+"&topType="+e[Math.floor(d()*e.length)]},t}();e.AvatarGenerator=i},307:(t,e,n)=>{var r=n(160),o=n(169),i=n(723),a=n(383),c=n(237),s=n(65),u=n(77);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=a,u.xor4096=c,u.tychei=s,t.exports=u},160:function(t,e,n){var r;!function(t,o){function i(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function c(t,e){var n=new i(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.alea=c}(0,t=n.nmd(t),n.amdD)},65:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.tychei=c}(0,t=n.nmd(t),n.amdD)},169:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor128=c}(0,t=n.nmd(t),n.amdD)},237:function(t,e,n){var r;!function(t,o){function i(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,i=e.i;return e.w=r=r+1640531527|0,n=o[i+34&127],t=o[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,o,i,a,c=[],s=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,s=Math.max(s,e.length)),o=0,i=-32;i<s;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=c[127&i]^=r+a)?o+1:0);for(o>=128&&(c[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)r=c[o+34&127],n=c[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,c[o]=r^n;t.w=a,t.X=c,t.i=o}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function c(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xor4096=c}(0,t=n.nmd(t),n.amdD)},383:function(t,e,n){var r;!function(t,o){function i(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function c(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorshift7=c}(0,t=n.nmd(t),n.amdD)},723:function(t,e,n){var r;!function(t,o){function i(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function c(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(e,n,e,o))||(o.exports=r):this.xorwow=c}(0,t=n.nmd(t),n.amdD)},77:function(t,e,n){var r;!function(o,i,a){var c,s=256,u=a.pow(s,6),l=a.pow(2,52),f=2*l,h=255;function p(t,e,n){var r=[],h=m(b((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(i)]:null==t?function(){try{var t;return c&&(t=c.randomBytes)?t=t(s):(t=new Uint8Array(s),(o.crypto||o.msCrypto).getRandomValues(t)),v(t)}catch(t){var e=o.navigator,n=e&&e.plugins;return[+new Date,o,n,o.screen,v(i)]}}():t,3),r),p=new d(r),g=function(){for(var t=p.g(6),e=u,n=0;t<l;)t=(t+n)*s,e*=s,n=p.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|p.g(4)},g.quick=function(){return p.g(4)/4294967296},g.double=g,m(v(p.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,p),t.state=function(){return y(p,{})}),n?(a.random=t,e):t})(g,h,"global"in e?e.global:this==a,e.state)}function d(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);o<s;)a[o]=o++;for(o=0;o<s;o++)a[o]=a[i=h&i+t[o%n]+(e=a[o])],a[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,a=r.S;t--;)e=a[o=h&o+1],n=n*s+a[h&(a[o]=a[i=h&i+e])+(a[i]=e)];return r.i=o,r.j=i,n})(s)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function b(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(b(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function m(t,e){for(var n,r=t+"",o=0;o<r.length;)e[h&o]=h&(n^=19*e[h&o])+r.charCodeAt(o++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(m(a.random(),i),t.exports){t.exports=p;try{c=n(382)}catch(t){}}else void 0===(r=function(){return p}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},382:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";const t=n.p+"img/Nikolai_avatar.jpg";var e="Николай",r=t,o=new Intl.DateTimeFormat("ru",{hour:"numeric",hour12:!1,minute:"numeric"}),i=new Intl.DateTimeFormat("ru",{weekday:"short"}),a=new Intl.DateTimeFormat("ru",{day:"numeric",month:"short"}),c=new Intl.DateTimeFormat("ru",{day:"2-digit",month:"2-digit",year:"2-digit"}),s="MESSAGE_SEND",u="MESSAGE_READ";function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t){var n,r,o=t.pageName,i=t.userId,a=(n=document.querySelector("body").children,r=1,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,r)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],c={"CHAT-DIALOG":document.createElement("chat-dialog"),"CHATS-MENU":document.createElement("chats-menu")};c["CHATS-MENU"].setAttribute("username",e),c["CHAT-DIALOG"].setAttribute("userid",i),a.tagName!==o&&a.replaceWith(c[o])}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function d(t){var e="function"==typeof Map?new Map:void 0;return d=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(y())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&b(o,n.prototype),o}(t,arguments,m(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,t)},d(t)}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function v(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}function g(t,e,n){w(t,e),e.set(t,n)}function w(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(t,e,n){return t.set(S(t,e),n),n}function _(t,e){return t.get(S(t,e))}function S(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var x=new WeakMap,O=new WeakMap,j=new WeakMap,E=new WeakSet,P=function(t){function e(){var t,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e,n){return e=m(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}(this,e),w(n=t,r=E),r.add(n),g(t,x,void 0),g(t,O,void 0),g(t,j,void 0),function(t,e,n){(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(t,"container",void 0),t.hadnleClick=t.hadnleClick.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["userid"]}}],(r=[{key:"userId",get:function(){return _(x,this)},set:function(t){k(x,this,t)}},{key:"attributeChangedCallback",value:function(t,e,n){"userid"===t&&(this.userId=n)}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){this.container&&this.container.addEventListener("click",this.hadnleClick)}},{key:"removeEventListeners",value:function(){this.container&&this.container.removeEventListener("click",this.hadnleClick)}},{key:"render",value:function(){k(O,this,JSON.parse(localStorage.getItem("chat"))[this.userId]),k(j,this,_(O,this).messages.at(-1)),this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.container=this.shadowRoot.querySelector(".dialog"),this.addEventListeners()}},{key:"hadnleClick",value:function(){f({pageName:"CHAT-DIALOG",userId:this.userId})}},{key:"getHtml",value:function(){var t,e;return'\n      <link\n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0"\n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nimg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  overflow: hidden;\n}\n\n.dialog {\n  height: 80px;\n  padding: 10px 16px;\n  color: var(--color-black);\n  display: flex;\n  align-items: center;\n  column-gap: 12px;\n  position: relative;\n  border-bottom: 1px solid var(--color-white-blue);\n  cursor: pointer;\n  transition: background-color 0.3s ease-in;\n}\n.dialog:hover {\n  background-color: var(--color-white-light);\n}\n.dialog:active {\n  background-color: var(--color-white-blue);\n}\n\n.dialog__avatar {\n  width: 60px;\n  height: 60px;\n}\n.dialog__avatar.loading {\n  background: var(--color-white-light);\n  border-radius: 50%;\n}\n.dialog__user {\n  display: flex;\n  flex-direction: column;\n  align-self: stretch;\n  justify-content: space-evenly;\n  flex: 1;\n}\n.dialog__username {\n  font-size: 1em;\n}\n.dialog__last-message {\n  font-size: 0.9em;\n  color: var(--color-gray-dark);\n}\n.dialog__info {\n  display: flex;\n  flex-direction: column;\n  align-self: stretch;\n  justify-content: space-around;\n  align-items: end;\n}\n.dialog__last-message-time {\n  font-size: 0.9em;\n  color: var(--color-gray-light);\n}\n.dialog__check-mark {\n  color: var(--color-accent);\n}\n.dialog__unread {\n  color: var(--color-white-full);\n  background: var(--color-accent);\n  padding: 1px 6px;\n  border-radius: 4px;\n  font-size: 0.8em;\n}\n",'</style>\n      <div class="dialog">\n        <img src="').concat(_(O,this).avatar,'" class="dialog__avatar loading" alt="изображение пользователя" onload="this.classList.remove(\'loading\')" />\n        <div class="dialog__user">\n          <h2 class="dialog__username">').concat(_(O,this).userName,'</h2>\n          <p class="dialog__last-message">').concat((null===(t=_(j,this))||void 0===t?void 0:t.text)||"",'</p>\n        </div>\n        <div class="dialog__info">\n          <p class="dialog__last-message-time">').concat(_(j,this)?S(E,this,C).call(this,new Date(null===(e=_(j,this))||void 0===e?void 0:e.sendDate)):"",'</p>\n          <p class="dialog__check-mark">\n            ').concat(_(j,this)?S(E,this,D).call(this):"","\n          </p>\n        </div>\n      </div>\n    ")}}])&&p(n.prototype,r),o&&p(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(d(HTMLElement));function C(t){var e=new Date,n=t.getDate(),r=t.getMonth(),s=t.getFullYear(),u=o.format(t),l=i.format(t),f=a.format(t),h=c.format(t);return n===e.getDate()&&r===e.getMonth()&&s===e.getFullYear()?"".concat(u):r===e.getMonth()&&s===e.getFullYear()?"".concat(u," ").concat(l):s===e.getFullYear()?"".concat(f):"".concat(h)}function D(){var t,n=_(j,this).author,r=_(j,this).status,o=_(O,this).messages.filter((function(t){return t.author!==e&&t.status===s})).length;switch(r){case"MESSAGE_DRAFT":t="";break;case u:t="done_all";break;case s:t="check"}return n===e?'<span class="material-symbols-rounded">'.concat(t,"</span>"):o?'<p class="dialog__unread">'.concat(o,"</p>"):""}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function T(t){var e="function"==typeof Map?new Map:void 0;return T=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(A())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&F(o,n.prototype),o}(t,arguments,B(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},T(t)}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function R(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function H(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function I(t,e,n){return t.set(z(t,e),n),n}function N(t,e){return t.get(z(t,e))}function z(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var W=new WeakMap,q=new WeakMap,G=new WeakMap,J=new WeakMap,U=new WeakMap,Z=new WeakMap,X=function(t){function e(){var t,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H(t=function(t,e,n){return e=B(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(e,n||[],B(t).constructor):e.apply(t,n))}(this,e),W,void 0),H(t,q,void 0),H(t,G,void 0),H(t,J,void 0),H(t,U,void 0),H(t,Z,!1),n=t,o=void 0,(r=R(r="inputRequestDelay"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.handleChangeIsSearch=t.handleChangeIsSearch.bind(t),t.handleSearch=t.handleSearch.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){N(W,this)&&N(W,this).addEventListener("click",this.handleChangeIsSearch),N(q,this)&&N(q,this).addEventListener("click",this.handleChangeIsSearch),N(G,this)&&(N(G,this).addEventListener("keyup",this.handleSearch),N(G,this).addEventListener("enter",this.preventDefault))}},{key:"removeEventListeners",value:function(){N(W,this)&&N(W,this).removeEventListener("click",this.handleChangeIsSearch),N(q,this)&&N(q,this).removeEventListener("click",this.handleChangeIsSearch),N(G,this)&&(N(G,this).removeEventListener("keyup",this.handleSearch),N(G,this).removeEventListener("enter",this.preventDefault))}},{key:"handleChangeIsSearch",value:function(){I(Z,this,!N(Z,this)),sessionStorage.removeItem("chat"),this.render(),N(J,this)&&N(J,this).partialRerender()}},{key:"handleSearch",value:function(){var t=this;this.inputRequestDelay&&clearTimeout(this.inputRequestDelay),this.inputRequestDelay=setTimeout((function(){var e=JSON.parse(localStorage.getItem("chat")),n={};for(var r in e)e[r].userName.trim().toLowerCase().includes(N(G,t).value.trim().toLowerCase())&&(n[r]=e[r]);sessionStorage.setItem("chat",JSON.stringify(n)),N(J,t)&&N(J,t).partialRerender()}),500)}},{key:"preventDefault",value:function(t){t.preventDefault()}},{key:"render",value:function(){var t=this;this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),I(W,this,this.shadowRoot.querySelector("#button-search")),I(q,this,this.shadowRoot.querySelector("#button-back")),I(G,this,this.shadowRoot.querySelector("#input-search")),I(J,this,document.querySelector("chats-menu")),I(U,this,this.shadowRoot.querySelector(".header__username")),this.addEventListeners(),N(G,this)&&setTimeout((function(){N(G,t).classList.add("header__search-input_animate")}),0),N(q,this)&&setTimeout((function(){N(q,t).classList.add("button-back_animate")}),0),N(U,this)&&setTimeout((function(){N(U,t).classList.add("header__username_animate")}),0)}},{key:"getHeaderContent",value:function(){return N(Z,this)?'\n      <button class="header__button button-back" id="button-back">\n        <span class="material-symbols-rounded">arrow_back_ios_new</span>\n      </button>\n      <input placeholder="Поиск..." class="header__search-input" id="input-search" />\n      ':'\n        <button class="header__button button-menu">\n          <span class="material-symbols-rounded">menu</span>\n        </button>\n        <h1 class="header__username"><slot></slot></h1>\n        <button class="header__button button-search" id="button-search">\n          <span class="material-symbols-rounded">search</span>\n        </button>\n        '}},{key:"getHtml",value:function(){return'\n      <link \n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" \n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\ninput[type=submit] {\n  visibility: collapse;\n}\n\ninput {\n  border: 0;\n  outline: none;\n  width: 100%;\n  font-size: inherit;\n}\n\ninput:-webkit-autofill {\n  -webkit-background-clip: text;\n}\n\nbutton {\n  cursor: pointer;\n  color: inherit;\n  background: none;\n  border: none;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  column-gap: 12px;\n  padding: 14px 16px;\n  background: var(--color-accent);\n  color: var(--color-white-full);\n}\n\n.header__button {\n  transition: color 0.3s ease-in;\n}\n.header__button:hover {\n  color: var(--color-white-hover);\n}\n\n.button-back {\n  opacity: 0;\n  transition: color 0.3s ease-in, opacity 0.1s ease-in;\n}\n.button-back_animate {\n  opacity: 1;\n}\n\n.header__username {\n  flex: 1;\n  line-height: 1;\n  font-size: 1.4em;\n  opacity: 0;\n  transition: opacity 0.3s ease-in;\n}\n.header__username_animate {\n  opacity: 1;\n}\n\n.header__search-input {\n  background: transparent;\n  color: var(--color-white-full);\n  width: 0;\n  transition: width 0.3s ease-in;\n}\n.header__search-input_animate {\n  width: 100%;\n\n}\n\n.header__search-input::placeholder {\n  color: var(--color-white-full);\n  opacity: 0.5;\n}\n",'</style>\n      <div class="header">\n        ').concat(this.getHeaderContent(),"\n      </div>\n    ")}}])&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(T(HTMLElement)),Y=new(n(629).AvatarGenerator);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nt(r.key),r)}}function V(t){var e="function"==typeof Map?new Map:void 0;return V=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Q())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&tt(o,n.prototype),o}(t,arguments,et(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tt(n,t)},V(t)}function Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Q=function(){return!!t})()}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}function nt(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}var rt=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=function(t,e,n){return e=et(e),function(t,e){if(e&&("object"==K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Q()?Reflect.construct(e,n||[],et(t).constructor):e.apply(t,n))}(this,e,[].concat(a)),n=t,o=void 0,(r=nt(r="button"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.button=this.shadowRoot.querySelector("#button-create-chat"),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.button&&this.button.addEventListener("click",this.handleClickNewChatButton)}},{key:"removeEventListeners",value:function(){this.button&&this.button.removeEventListener("click",this.handleClickNewChatButton)}},{key:"handleClickNewChatButton",value:function(){var t=prompt("Введите имя пользователя для нового диалога"),e=JSON.parse(localStorage.getItem("chat")),n=Object.keys(e).length,r=document.querySelector("chats-menu");t&&t.trim()&&(e[n+1]={avatar:Y.generateRandomAvatar(),messages:[],userName:t.trim()},localStorage.setItem("chat",JSON.stringify(e)),r&&r.render())}},{key:"getHtml",value:function(){return'\n      <link \n        rel="stylesheet"\n        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" \n      />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176ef9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nbutton {\n  cursor: pointer;\n  color: inherit;\n  border: none;\n}\n\n.new-chat-button {\n  background-color: var(--color-accent);\n  color: var(--color-white-full);\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  position: fixed;\n  bottom: 16px;\n  right: 16px;\n  transition: background-color 0.3s ease-in;\n}\n.new-chat-button:hover {\n  animation: pulse 2s infinite;\n  background-color: var(--color-accent-hover);\n}\n.new-chat-button.new-chat-button:active {\n  background-color: var(--color-accent-hover);\n}\n.new-chat-button span {\n  font-size: 2em;\n}\n\n@keyframes pulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(23, 110, 249, 0.4);\n  }\n  90% {\n    box-shadow: 0 0 0 10px rgba(23, 110, 249, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(23, 110, 249, 0);\n  }\n}\n",'</style>\n      <button class="new-chat-button" id="button-create-chat">\n        <span class="material-symbols-rounded">add</span>\n      </button>\n    ')}}])&&$(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(V(HTMLElement));function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function at(t){var e="function"==typeof Map?new Map:void 0;return at=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(ct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&st(o,n.prototype),o}(t,arguments,ut(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),st(n,t)},at(t)}function ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ct=function(){return!!t})()}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}function lt(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}function ft(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ht=new WeakMap,pt=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(t=function(t,e,n){return e=ut(e),function(t,e){if(e&&("object"==ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ct()?Reflect.construct(e,n||[],ut(t).constructor):e.apply(t,n))}(this,e,[].concat(a)),ht,void 0),n=t,o=void 0,(r=lt(r="chatData"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["username"]}}],(r=[{key:"name",get:function(){return(t=ht).get(ft(t,this));var t},set:function(t){var e,n;n=t,(e=ht).set(ft(e,this),n)}},{key:"connectedCallback",value:function(){customElements.get("chatmenu-header")||customElements.define("chatmenu-header",X),customElements.get("create-chat-button")||customElements.define("create-chat-button",rt),customElements.get("chatmenu-dialog")||customElements.define("chatmenu-dialog",P),this.render()}},{key:"attributeChangedCallback",value:function(t,e,n){"username"===t&&(this.userName=n)}},{key:"render",value:function(){this.chatData=JSON.parse(sessionStorage.getItem("chat"))||JSON.parse(localStorage.getItem("chat"))||[],this.innerHTML=this.getHtml()}},{key:"partialRerender",value:function(){this.chatData=JSON.parse(sessionStorage.getItem("chat"))||JSON.parse(localStorage.getItem("chat"))||[],document.querySelector(".chats").innerHTML=Object.keys(this.chatData).map((function(t){return'<chatmenu-dialog userid="'.concat(t,'"></chatmenu-dialog>')})).join("")}},{key:"getHtml",value:function(){return"\n      <chatmenu-header>".concat(this.userName,'</chatmenu-header>\n      <div class="chats">\n        ').concat(Object.keys(this.chatData).map((function(t){return'<chatmenu-dialog userid="'.concat(t,'"></chatmenu-dialog>')})).join(""),"\n      </div>\n      <create-chat-button></create-chat-button>\n    ")}}])&&it(n.prototype,r),o&&it(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(at(HTMLElement)),dt={1:{avatar:Y.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:u,text:"Привет, Эшли!"},{author:"Дженнифер Эшли",sendDate:"2024-10-01T23:40:00.622Z",status:u,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:u,text:"Как дела?"},{author:"Дженнифер Эшли",sendDate:"2024-10-06T08:40:00.622Z",status:s,text:"Хорошо!"}],userName:"Дженнифер Эшли"},2:{avatar:Y.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:u,text:"Привет, Тоха!"},{author:"Антон Иванов",sendDate:"2024-10-01T23:40:00.622Z",status:u,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-10-05T12:12:00.622Z",status:u,text:"Тоха, ты где?"}],userName:"Антон Иванов"},3:{avatar:Y.generateRandomAvatar(),messages:[{author:e,sendDate:"2024-10-01T23:39:00.622Z",status:u,text:"Привет, Серега!"},{author:"Серёга (Должен 2000 ₽)",sendDate:"2024-10-01T23:40:00.622Z",status:u,text:"Привет, ".concat(e,"!")},{author:e,sendDate:"2024-09-31T15:00:00.622Z",status:s,text:"Серег, где бабло моё?!"}],userName:"Серёга (Должен 2000 ₽)"},4:{avatar:Y.generateRandomAvatar(),messages:[{author:e,sendDate:"2023-12-31T23:39:00.622Z",status:s,text:"Привет, Сэм!"}],userName:"Сэм с Нижнего"}};function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ot(r.key),r)}}function gt(t){var e="function"==typeof Map?new Map:void 0;return gt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(wt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&kt(o,n.prototype),o}(t,arguments,_t(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kt(n,t)},gt(t)}function wt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wt=function(){return!!t})()}function kt(t,e){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kt(t,e)}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}function St(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function xt(t,e,n){return(e=Ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t){var e=function(t){if("object"!=yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}function jt(t,e){return t.get(Pt(t,e))}function Et(t,e,n){return t.set(Pt(t,e),n),n}function Pt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ct=new WeakMap,Dt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,At=new WeakMap,Ft=function(t){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),xt(t=function(t,e,n){return e=_t(e),function(t,e){if(e&&("object"==yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wt()?Reflect.construct(e,n||[],_t(t).constructor):e.apply(t,n))}(this,n),"form",void 0),xt(t,"input",void 0),xt(t,"formSendButton",void 0),St(t,Ct,void 0),St(t,Dt,void 0),St(t,Mt,!1),St(t,Lt,void 0),St(t,Tt,"Введите сообщение"),St(t,At,"Сначала вы должны ввести имя"),t.handleSubmit=t.handleSubmit.bind(t),t.handleKeyPress=t.handleKeyPress.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kt(t,e)}(n,t),r=n,i=[{key:"observedAttributes",get:function(){return["userid"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){var r=JSON.parse(localStorage.getItem("chat"));"userid"===t&&(Et(Ct,this,n),Et(Lt,this,r[jt(Ct,this)].messages),Et(Dt,this,r[jt(Ct,this)].userName))}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.form=this.shadowRoot.querySelector(".form"),this.input=this.shadowRoot.querySelector(".form__input"),this.formSendButton=this.shadowRoot.querySelector(".form__send-button"),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.form.addEventListener("submit",this.handleSubmit),this.form.addEventListener("keypress",this.handleKeyPress),this.input.addEventListener("input",this.handleInputChange)}},{key:"removeEventListeners",value:function(){this.form&&this.input&&(this.form.removeEventListener("submit",this.handleSubmit),this.form.removeEventListener("keypress",this.handleKeyPress),this.input.removeEventListener("input",this.handleInputChange))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=JSON.parse(localStorage.getItem("chat")),n=document.querySelector("messages-list"),r=JSON.parse(localStorage.getItem("chat"));Et(Lt,this,e[jt(Ct,this)].messages),this.input.value.trim()&&(jt(Lt,this).push({author:this.getAuthor(),sendDate:new Date,status:s,text:this.input.value.trim()}),this.input.value="",this.formSendButton.classList.remove("form__send-button_active"),localStorage.setItem("chat",JSON.stringify(mt(mt({},r),{},xt({},jt(Ct,this),mt(mt({},r[jt(Ct,this)]),{},{messages:jt(Lt,this)})))))),n&&n.render()}},{key:"handleKeyPress",value:function(t){t.shiftKey||13!==t.keyCode||(t.preventDefault(),this.form.dispatchEvent(new Event("submit")))}},{key:"handleInputChange",value:function(){this.input.value?this.formSendButton.classList.add("form__send-button_active"):this.formSendButton.classList.remove("form__send-button_active")}},{key:"lockInput",value:function(){this.input.disabled=!0,this.input.placeholder=jt(At,this),this.formSendButton.classList.remove("form__send-button_active")}},{key:"unLockInput",value:function(){this.input.disabled=!1,this.input.placeholder=jt(Tt,this),this.handleInputChange()}},{key:"getAuthor",value:function(){return[e,jt(Dt,this)][+jt(Mt,this)]}},{key:"invertAuthor",value:function(){Et(Mt,this,!jt(Mt,this))}},{key:"getHtml",value:function(){return'\n      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nbody {\n  font-size: 16px;\n}\n\n.form {\n  width: 100%;\n  display: flex;\n  padding: 10px 12px;\n  background: var(--color-white-blue);\n  align-items: center;\n}\n\n.form__input {\n  resize: none;\n  padding: 12px 16px;\n  border: 0;\n  outline: none;\n  flex: 1;\n  font-size: inherit;\n  background: var(--color-white-full);\n  border-radius: 20px;\n}\n\n.form__send-button {\n  cursor: pointer;\n  visibility: hidden;\n  opacity: 0;\n  justify-content: center;\n  align-items: center;\n  background: var(--color-accent);\n  border: none;\n  border-radius: 50%;\n  width: 0px;\n  height: 40px;\n  place-items: center;\n  transition: margin, width, opacity 0.3s ease-in, visibility 0s 0.3s;\n}\n.form__send-button_active {\n  display: grid;\n  opacity: 1;\n  visibility: visible;\n  width: 40px;\n  margin-left: 12px;\n  transition: margin, width, opacity 0.3s ease-in, visibility 0s 0s;\n}\n\n.form__send-icon {\n  color: var(--color-white-full);\n  padding-left: 3px;\n  line-height: 40px;\n}\n",'</style>\n      <form class="form" action="/" autocomplete="off">\n        <textarea \n          class="form__input" \n          name="message-text" \n          placeholder="').concat(jt(Tt,this),'" \n          rows="1" \n        ></textarea>\n        <button class="form__send-button">\n          <span class="material-symbols-rounded form__send-icon">\n            send\n          </span>\n        </button>\n      </form>')}}])&&vt(r.prototype,o),i&&vt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(gt(HTMLElement));function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Rt(t){return function(t){if(Array.isArray(t))return Ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ht(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zt(r.key),r)}}function Wt(t){var e="function"==typeof Map?new Map:void 0;return Wt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(qt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Gt(o,n.prototype),o}(t,arguments,Jt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Gt(n,t)},Wt(t)}function qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qt=function(){return!!t})()}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gt(t,e)}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}function Ut(t,e,n){return(e=Zt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zt(t){var e=function(t){if("object"!=Bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bt(e)?e:e+""}function Xt(t,e,n){Yt(t,e),e.set(t,n)}function Yt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kt(t,e){return t.get(Vt(t,e))}function $t(t,e,n){return t.set(Vt(t,e),n),n}function Vt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Qt=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakSet,ae=function(t){function n(){var t,e,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=function(t,e,n){return e=Jt(e),function(t,e){if(e&&("object"==Bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qt()?Reflect.construct(e,n||[],Jt(t).constructor):e.apply(t,n))}(this,n),Yt(e=t,r=ie),r.add(e),Xt(t,Qt,void 0),Xt(t,te,void 0),Xt(t,ee,void 0),Xt(t,ne,!1),Xt(t,re,null),Xt(t,oe,void 0),Ut(t,"container",void 0),Ut(t,"actions",void 0),Ut(t,"messageContextIndex",void 0),t.handleMessageMouseDown=t.handleMessageMouseDown.bind(t),t.hadnleContextClick=t.hadnleContextClick.bind(t),t.updateMessageStatus=t.updateMessageStatus.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(n,t),r=n,i=[{key:"observedAttributes",get:function(){return["userid"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){"userid"===t&&$t(Qt,this,n)}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"updateMessageStatus",value:function(t){var n=this,r=Kt(te,this).map((function(r){return Kt(ne,n)||r.author!==t.userName?Kt(ne,n)&&r.author===e?Nt(Nt({},r),{},{status:u}):r:Nt(Nt({},r),{},{status:u})}));localStorage.setItem("chat",JSON.stringify(Nt(Nt({},Kt(ee,this)),{},Ut({},Kt(Qt,this),Nt(Nt({},t),{},{messages:r})))))}},{key:"addEventListeners",value:function(){this.container&&(this.container.addEventListener("contextmenu",this.hadnleContextClick),this.container.addEventListener("mousedown",this.handleMessageMouseDown))}},{key:"removeEventListeners",value:function(){this.container&&(this.container.removeEventListener("contextmenu",this.hadnleContextClick),this.container.removeEventListener("mousedown",this.handleMessageMouseDown))}},{key:"handleMessageMouseDown",value:function(t){2!==t.button&&this.actions.classList.contains("actions_active")&&(this.actions.classList.remove("actions_active"),this.messageContextIndex=null)}},{key:"hadnleContextClick",value:function(t){t.preventDefault();var e=t.target.closest(".messages-container__message"),n=this.actions.classList.contains("actions_active");e&&!n?(this.messageContextIndex=+e.getAttribute("data-index"),this.renderActionsMenu(t)):(this.messageContextIndex=null,this.actions.classList.remove("actions_active"))}},{key:"renderActionsMenu",value:function(t){var e=window.innerWidth;t.pageX<e/2?this.actions.style.left="".concat(t.pageX,"px"):this.actions.style.left="".concat(t.pageX-142,"px"),this.actions.style.top="".concat(t.pageY,"px"),this.actions.classList.add("actions_active")}},{key:"removeMessage",value:function(){var t=JSON.parse(localStorage.getItem("chat"));$t(te,this,[].concat(Rt(Kt(te,this).slice(0,this.messageContextIndex)),Rt(Kt(te,this).slice(this.messageContextIndex+1)))),localStorage.setItem("chat",JSON.stringify(Nt(Nt({},t),{},Ut({},Kt(Qt,this),Nt(Nt({},t[Kt(Qt,this)]),{},{messages:Kt(te,this)}))))),this.render()}},{key:"invertUsers",value:function(){$t(re,this,Kt(ne,this)),$t(ne,this,!Kt(ne,this)),this.render()}},{key:"render",value:function(){var t=this;$t(ee,this,JSON.parse(localStorage.getItem("chat")));var e=Kt(ee,this)[Kt(Qt,this)];$t(te,this,e.messages),this.updateMessageStatus(e),this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.container=this.shadowRoot.querySelector(".messages-container"),this.actions=this.shadowRoot.querySelector(".actions"),this.addEventListeners(),null===Kt(re,this)&&this.shadowRoot.querySelectorAll(".messages-container__message").forEach((function(t){return t.classList.add("messages-container__message_show")})),null!==Kt(re,this)&&Kt(re,this)!==Kt(ne,this)&&setTimeout((function(){t.shadowRoot.querySelectorAll(".messages-container__message").forEach((function(t){return t.classList.add("messages-container__message_animate")}))}),0),$t(re,this,null),$t(oe,this,Kt(te,this).length)}},{key:"getHtml",value:function(){var t=this;return"\n      <style>".concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\n.messages-container {\n  display: flex;\n  flex-direction: column;\n  align-items: end;\n  padding: 8px;\n}\n.messages-container__author {\n  opacity: 0.7;\n}\n.messages-container__message {\n  list-style-type: none;\n  max-width: 90%;\n  margin: 4px 0;\n  padding: 4px 12px;\n  border-radius: 8px 8px 0 8px;\n  background: var(--color-accent);\n  color: var(--color-white-full);\n  opacity: 0;\n  transition: opacity 0.3s ease-in;\n}\n.messages-container__message_animate, .messages-container__message_show {\n  opacity: 1;\n}\n.messages-container__message_new {\n  position: relative;\n  animation: new-message 0.2s ease-in;\n}\n\n.messages-container__message_user {\n  background: var(--color-white-full);\n  color: var(--color-black);\n  align-self: flex-start;\n  border-radius: 8px 8px 8px 0;\n}\n.messages-container__timestamp {\n  font-size: 0.7em;\n  color: var(--color-white-blue);\n  opacity: 0.5;\n  display: block;\n  text-align: right;\n}\n.messages-container__message_user .messages-container__timestamp {\n  color: var(--color-gray-dark);\n}\n\n.actions {\n  position: absolute;\n  display: none;\n  border: 1px solid var(--color-gray-light);\n  padding: 4px 8px;\n  background: var(--color-white-full);\n  border-radius: 8px;\n  top: 90px;\n}\n.actions_active {\n  display: block;\n}\n.actions__elem {\n  cursor: pointer;\n  border: none;\n  background: none;\n}\n\n@keyframes new-message {\n  0% {\n    right: -25%;\n  }\n  100% {\n    right: 0;\n  }\n}\n",'</style>\n      <ul class="messages-container">\n        ').concat(Kt(te,this).map((function(e,n){return Vt(ie,t,se).call(t,e,n)})).join(""),'\n      </ul>\n      <div class="actions">\n        <button class="actions__elem" data-action="delete" onclick="this.getRootNode().host.removeMessage()">Удалить сообщение</button>\n      </div>\n    ')}}])&&zt(r.prototype,o),i&&zt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(Wt(HTMLElement));function ce(t){var e=o.format(t);return"".concat(e)}function se(t,n){var r=this,o=t.author.trim()===e,i="messages-container__message ".concat(!Kt(ne,r)&&o||Kt(ne,r)&&!o?"":"messages-container__message_user"," ").concat(n>=Kt(oe,r)?"messages-container__message_new":"");return'\n      <li data-index="'.concat(n,'" class="').concat(i,'">\n        <p class="messages-container__text">').concat(t.text.replace(/\n/g,"<br>"),'</p>\n        <span class="messages-container__timestamp">').concat(Vt(ie,this,ce).call(this,new Date(t.sendDate)),"</span>\n      </li>\n      ")}function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function fe(t){var e="function"==typeof Map?new Map:void 0;return fe=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(he())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&pe(o,n.prototype),o}(t,arguments,de(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pe(n,t)},fe(t)}function he(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(he=function(){return!!t})()}function pe(t,e){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pe(t,e)}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},de(t)}function ye(t,e,n){return(e=be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function be(t){var e=function(t){if("object"!=ue(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ue(e)?e:e+""}function me(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function ve(t,e){return t.get(we(t,e))}function ge(t,e,n){return t.set(we(t,e),n),n}function we(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ke=new WeakMap,_e=new WeakMap,Se=new WeakMap,xe=new WeakMap,Oe=new WeakMap,je=new WeakMap,Ee=function(t){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),me(t=function(t,e,n){return e=de(e),function(t,e){if(e&&("object"==ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,he()?Reflect.construct(e,n||[],de(t).constructor):e.apply(t,n))}(this,n),ke,void 0),me(t,_e,void 0),me(t,Se,void 0),me(t,xe,void 0),me(t,Oe,void 0),me(t,je,!1),ye(t,"backButton",void 0),ye(t,"swapButton",void 0),t.handleBackClick=t.handleBackClick.bind(t),t.handleSwapClick=t.handleSwapClick.bind(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(n,t),o=n,a=[{key:"observedAttributes",get:function(){return["userid"]}}],(i=[{key:"attributeChangedCallback",value:function(t,e,n){if("userid"===t){var r=JSON.parse(localStorage.getItem("chat"));ge(ke,this,n),ge(_e,this,r[ve(ke,this)].userName),ge(Oe,this,r[ve(ke,this)].avatar)}}},{key:"connectedCallback",value:function(){this.attachShadow({mode:"open"}),this.render()}},{key:"addEventListeners",value:function(){this.backButton&&(this.backButton.addEventListener("click",this.handleBackClick),this.swapButton.addEventListener("click",this.handleSwapClick))}},{key:"removeEventListeners",value:function(){this.backButton&&(this.backButton.removeEventListener("click",this.handleBackClick),this.swapButton.removeEventListener("click",this.handleSwapClick))}},{key:"render",value:function(){this.removeEventListeners(),this.shadowRoot.innerHTML=this.getHtml(),this.backButton=this.shadowRoot.querySelector("#button-back"),this.swapButton=this.shadowRoot.querySelector("#button-swap"),ge(xe,this,this.shadowRoot.querySelector(".user__avatar")),ge(Se,this,this.shadowRoot.querySelector(".user__name")),ve(je,this)&&this.swapButton.classList.add("button__swap_active"),this.addEventListeners()}},{key:"handleBackClick",value:function(){f({pageName:"CHATS-MENU"})}},{key:"handleSwapClick",value:function(){var t=document.querySelector("messages-list"),e=document.querySelector("message-input");t&&t.invertUsers(),e&&e.invertAuthor(),ge(je,this,!ve(je,this)),this.render(),ve(xe,this).classList.add("user__avatar_animate"),ve(Se,this).classList.add("user__name_animate")}},{key:"getAvatar",value:function(){return[ve(Oe,this),r][+ve(je,this)]}},{key:"getUserName",value:function(){return[ve(_e,this),e][+ve(je,this)]}},{key:"getHtml",value:function(){return'\n      <link rel="stylesheet"\n            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />\n      <style>'.concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nimg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  overflow: hidden;\n}\n\nbutton {\n  cursor: pointer;\n}\n\n.button {\n  color: inherit;\n  background: none;\n  border: none;\n}\n\n.header {\n  background: var(--color-white-full);\n  height: 60px;\n  width: 100%;\n  padding: 8px 16px;\n  column-gap: 16px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  color: var(--color-black);\n  z-index: 1;\n}\n\n.user {\n  height: 100%;\n  margin-right: auto;\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n}\n\n.user__avatar {\n  width: unset;\n  border-radius: 50%;\n  width: 44px;\n  height: 44px;\n}\n.user__avatar_animate {\n  animation: opacity-show 0.2s ease-in;\n}\n\n.user__name {\n  color: inherit;\n  font-weight: bold;\n  font-size: 1.2em;\n  overflow: hidden;\n  max-height: 1em;\n}\n.user__name_animate {\n  animation: name-show 0.2s ease-in;\n}\n\n.user__last-online {\n  color: var(--color-gray-light);\n  font-size: 0.8em;\n}\n\n.button__swap_active {\n  color: var(--color-accent);\n}\n\n@keyframes opacity-show {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes name-show {\n  0% {\n    width: 0;\n  }\n  100% {\n    width: 100%;\n  }\n}\n",'</style>\n      <header class="header">\n        <button class="button" id="button-back">\n          <span class="material-symbols-rounded">\n            arrow_back_ios_new\n          </span>\n        </button>\n        <div class="user">\n          <img src="').concat(this.getAvatar(),'" alt="Аватар пользователя" class="user__avatar">\n          <div class="user__name-container">\n            <p class="user__name">').concat(this.getUserName(),'</p>\n            <p class="user__last-online">был недавно</p>\n          </div>\n        </div>\n        <button class="button" id="button-swap"><span class="material-symbols-rounded">swap_horiz</span></button>\n      </header>\n    ')}}])&&le(o.prototype,i),a&&le(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}(fe(HTMLElement));function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,De(r.key),r)}}function De(t){var e=function(t){if("object"!=Pe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pe(e)?e:e+""}function Me(t){var e="function"==typeof Map?new Map:void 0;return Me=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Le())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Te(o,n.prototype),o}(t,arguments,Ae(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Te(n,t)},Me(t)}function Le(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Le=function(){return!!t})()}function Te(t,e){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Te(t,e)}function Ae(t){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ae(t)}function Fe(t,e){return t.get(Be(t,e))}function Be(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Re=new WeakMap,He=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(t=function(t,e,n){return e=Ae(e),function(t,e){if(e&&("object"==Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Le()?Reflect.construct(e,n||[],Ae(t).constructor):e.apply(t,n))}(this,e,[].concat(r)),Re,void 0),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Te(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["userid"]}}],(r=[{key:"connectedCallback",value:function(){customElements.get("messages-list")||customElements.define("messages-list",ae),customElements.get("message-input")||customElements.define("message-input",Ft),customElements.get("chat-header")||customElements.define("chat-header",Ee),this.render()}},{key:"attributeChangedCallback",value:function(t,e,n){var r,o;"userid"===t&&(o=n,(r=Re).set(Be(r,this),o))}},{key:"render",value:function(){this.innerHTML=this.getHtml()}},{key:"getHtml",value:function(){return"\n      <style>".concat("*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --color-white-full: #FDFDFD;\n  --color-white-light: #F6F6F8;\n  --color-white-blue: #F0F1F5;\n  --color-white-hover: #dfe2e9;\n  --color-black: #26282C;\n  --color-accent: #176EF9;\n  --color-accent-hover: #458BFA;\n  --color-gray-light: #A5ADBA;\n  --color-gray-dark: #7B8493;\n\n}\n\nchat-header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n}\n\nmessages-list {\n  background: var(--color-white-blue);\n  flex: 1;\n  padding: 60px 0;\n}\n\nmessage-input {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n}\n","</style>\n      <chat-header userid=").concat(Fe(Re,this),"></chat-header>\n      <messages-list userid=").concat(Fe(Re,this),"></messages-list>\n      <message-input userid=").concat(Fe(Re,this),"></message-input>\n    ")}}])&&Ce(n.prototype,r),o&&Ce(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Me(HTMLElement));n.p,customElements.get("chat-dialog")||customElements.define("chat-dialog",He),customElements.get("chats-menu")||customElements.define("chats-menu",pt);var Ie=document.querySelector("#root"),Ne=document.createElement("chats-menu");Ne.setAttribute("username",e),Ie.replaceWith(Ne),localStorage.getItem("chat")||(localStorage.setItem("chat",JSON.stringify(dt)),Ne.render())})()})();